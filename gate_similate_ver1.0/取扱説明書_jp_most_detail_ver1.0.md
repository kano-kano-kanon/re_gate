read_me 日本語版（もっとも最新かつ詳細）

=======================================
デジタル論理回路シミュレーションプログラム
=======================================

本プログラムは、基本的な論理ゲートやフリップフロップ（FF）を使った
デジタル回路の動作をPython上でシミュレートします。

---

■ 目次 ■
1. 全体概要
2. 「素の素子・ゲート版」使い方・クラス構成
3. 「easyer.Circuit版」使い方・クラス構成
4. それぞれの特徴・推奨使用シーン
5. その他の機能
6. ライセンス・問い合わせ

---

=======================================
1. 全体概要
=======================================

- 基本論理ゲート (AND, OR, NOT, NAND, NOR, XOR, XNOR) をサポート
- フリップフロップ (T, D, JK, RS) の状態遷移をモデル化
- 多入力ゲート対応 (and_n, or_n, etc.)
- 遅延回路の表現
- 電源(VCC)や抵抗(Resistor)などアナログ要素の簡易モデル
- クロック信号生成 (time_functionクラス)
- ノード(Node)を使った回路構築
- エラー検出機能付き（入力値は0か1のみ許容）

---

=======================================
2. 「素の素子・ゲート版」使い方・クラス構成
=======================================

■ 主要クラス

- `d_gate` : 論理ゲートクラス。基本ゲートは全てここに定義。
  - 例: `And(a,b)`, `Not(inp)`, `fa(a,b,cin)`（全加算器）など
- `ff_gate` : フリップフロップ用クラス
  - メソッド: `t(clk_edge)`, `d(d_val, clk_edge)`, `jk(j,k,clk_edge)`, `rs(r,s)`
- `analog_element` : 電源や抵抗などのアナログ素子
  - サブクラス: `VCC`, `Resistor`
- `time_function` : クロック信号生成
- `Node` : 入力やゲートをノードとして結合し回路を作るクラス

■ 簡単な例（コード）

```python
d = d_gate()
a, b = 1, 0
out_and = d.And(a, b)
out_not = d.Not(a)
print(f"AND({a},{b}) = {out_and}")
print(f"NOT({a}) = {out_not}")

ff = ff_gate()
clk_edge = 1
state_t = ff.t(clk_edge)
print(f"T-FF state: {state_t}")
````

■ 回路構築例

```python
n_and = Node(func=d.And, name="AND")
n_not = Node(func=d.Not, name="NOT")
n_and.inputs = [1, 0]
n_not.inputs = [n_and]

out_and = n_and.eval()
out_not = n_not.eval()
print(f"AND output: {out_and}, NOT output: {out_not}")
```

■ 特徴

* 低レベルAPIで自由度は高いが、複雑な回路は管理が煩雑
* 入力値チェックや遅延などは自分で管理する必要あり

---

\=======================================
3\. 「easyer.Circuit版」使い方・クラス構成
==============================

■ 主要クラス・構造

* `easyer` 名前空間にまとめている
* `easyer.Circuit` クラスがメイン

  * 入力端子の作成: `add_input(name)`
  * 論理ゲートの追加: `add_gate(gate_name, input_nodes, name=None)`

    * gate\_nameは 'AND', 'OR', 'NOT', 'XOR', 'NAND', 'NOR', 'XNOR', 'HA', 'FA', 'MUX' など対応
  * 入力値設定: `set_inputs({name: value, ...})`
  * シミュレーションステップ実行: `step()`
  * 結果の文字列出力: `to_string()`
  * 波形履歴表示: `wave_dump()`

■ 簡単な例（コード）

```python
import easyer

circuit = easyer.Circuit()
a = circuit.add_input('a')
b = circuit.add_input('b')

not_a = circuit.add_gate('NOT', [a], name='not_a')
and_gate = circuit.add_gate('AND', [not_a, b], name='and_gate')

circuit.set_inputs({'a': 0, 'b': 1})
circuit.step()

print(circuit.to_string())
print(circuit.wave_dump())
```

■ 内部構造

* `Circuit`は内部でNodeを管理
* 各Nodeはゲート関数(`d_gate`のメソッド)を利用し評価
* 入力は名前付きで管理し、何度でも値を変えてシミュレーション可能
* 波形履歴は過去ステップの信号変化を蓄積し、可視化に使う

■ 特徴

* 回路構築が非常にシンプルでわかりやすい
* 小〜中規模回路の試作に適する
* 内部でエラー検査も行い安全性が高い
* 複数ステップのシミュレーションに対応（過去履歴保持）

---

\=======================================
4\. それぞれの特徴・推奨使用シーン
===================

| 方式              | 特徴                  | 推奨用途             |
| --------------- | ------------------- | ---------------- |
| 素の素子・ゲート版       | 自由度が高い。低レベルに近く学習向き。 | 自作回路の細かい動作確認、学習用 |
| easyer.Circuit版 | 簡単操作で高速に試作・検証可能。    | プロトタイピング、中規模回路設計 |

---

\=======================================
5\. その他の機能
==========

* `time_function` クラスで任意のクロック波形作成可能
* アナログ素子（VCC、Resistor）を用いた簡単な電流・電圧計算
* エラー検出により不正入力時はプログラム停止
* `Node`クラスを使えば複雑な組み合わせ回路構築も可能

---

\=======================================
6\. ライセンス・問い合わせ
===============

* すべて作成者に帰属します。
* 問い合わせやバグ報告は開発者へ.Twitter:@kano_nandesu,keik:@kano.keik.info

---

\=======================================
【補足】用語説明
========

* 入力端子: 回路の外部から値を入力するノード
* 論理ゲート: AND, OR, NOTなどの基本論理演算単位
* フリップフロップ: 1ビットの記憶素子、状態を持つ回路
* 遅延: 入力が変わってから出力が変わるまでのクロック数の遅れ
* 波形履歴: 時間に沿った信号の変化記録

---

以上が本プログラムの詳細説明および使い方です。
不明点は遠慮なくお問い合わせください。